{"version":3,"sources":["EntitiesByPriority.js"],"names":[],"mappings":"AAAA,a;;AAEM,kB;AACJ,uB,GAAsB,E;AACtB,a,GAAY,IAAI,GAAJ,E;;AAER,U,EAAQ,Q,EAAU;AACpB,UAAI,KAAK,SAAL,CAAe,GAAf,CAAmB,MAAnB,CAAJ;AACE;AACF,WAAK,mBAAL,CAAyB,IAAzB,CAA8B,EAAC,cAAD,EAAS,kBAAT,EAA9B;AACA,WAAK,mBAAL,CAAyB,IAAzB,CAA8B,UAAC,OAAD,EAAU,OAAV,UAAsB,QAAQ,QAAR,GAAmB,QAAQ,QAAjD,EAA9B;AACA,WAAK,SAAL,CAAe,GAAf,CAAmB,MAAnB,EACD,C;;;AAEI,S,EAAO;AACV,WAAK,IAAI,cAAc,CAAvB,EAA0B,cAAc,KAAK,mBAAL,CAAyB,MAAjE,EAAyE,aAAzE,EAAwF;AACtF,YAAI,cAAc,KAAK,mBAAL,CAAyB,WAAzB,CAAlB;AACA,YAAI,SAAS,YAAY,MAAZ,CAAmB,IAAnB,CAAwB,KAAxB,CAAb;AACA,YAAI,WAAW,KAAf;AACE,cADF;;AAGE,gBAAQ,UAAU,KAAlB,CACH;;AACD,aAAO,KAAP,CACD,C;;;AAEM,U,EAAQ;AACb,UAAI,CAAC,KAAK,SAAL,CAAe,GAAf,CAAmB,MAAnB,CAAL;AACE;AACF,WAAK,mBAAL,CAAyB,MAAzB,CAAgC,KAAK,mBAAL,CAAyB,SAAzB,CAAmC,yBAAO,MAAM,MAAN,KAAiB,MAAxB,EAAnC,CAAhC,EAAoG,CAApG;AACA,WAAK,SAAL,CAAe,MAAf,CAAsB,MAAtB,EACD,C;;;;AAGY,kB","file":"EntitiesByPriority.js","sourcesContent":["'use strict';\r\n\r\nclass EntitiesByPriority {\r\n  _entitiesByPriority = [];\r\n  _entities = new Set();\r\n\r\n  add(entity, priority) {\r\n    if (this._entities.has(entity))\r\n      return;\r\n    this._entitiesByPriority.push({entity, priority});\r\n    this._entitiesByPriority.sort((entityA, entityB) => entityA.priority - entityB.priority);\r\n    this._entities.add(entity);\r\n  }\r\n\r\n  emit(event) {\r\n    for (let entityIndex = 0; entityIndex < this._entitiesByPriority.length; entityIndex++) {\r\n      let entityEntry = this._entitiesByPriority[entityIndex];\r\n      let result = entityEntry.entity.emit(event);\r\n      if (result === false)\r\n        break;\r\n      else\r\n        event = result || event;\r\n    }\r\n    return event;\r\n  }\r\n\r\n  remove(entity) {\r\n    if (!this._entities.has(entity))\r\n      return;\r\n    this._entitiesByPriority.splice(this._entitiesByPriority.findIndex(entry=>entry.entity === entity), 1);\r\n    this._entities.delete(entity);\r\n  }\r\n}\r\n\r\nexport default EntitiesByPriority;\r\n"],"sourceRoot":"/source/"}